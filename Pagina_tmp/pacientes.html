<!DOCTYPE html>
<html lang="es">
<head>
	<title>Pagina principal</title>
	<link rel="stylesheet" type="text/css" href="estilos.css">
	<body>
		<header>
			<section id="menu">
				<ul>
					<a href="index.html">Inicio</a>
					<a href="pacientes.html">Pacientes</a>
					<a href="evolucion.html">Datos</a>
				</ul>
			</section>
		</header><br>
		<section>
            <script type="text/javascript" src="JS/socket.io.js"></script> 
            <!--The above library(/socket.io/socket.io.js) will be generated by socket.io module of server -->
			<script src="JS/Chart.js"></script>
			<script src="JS/sql.js"></script>
			<script src="JS/pacientes_node.js"></script>
			<article align="center">Sección de pacientes</article><br>
    		<p>Lista de pacientes:</p><br>

			<table id="miTabla" style="width:90%" align="center">
  				<tr>
    				<th>Nombre</th> 
    				<th>Apellidos</th>
    				<th>Datos</th>
    				<td style="visibility:hidden;" width="30"></td>
  				</tr>
  				<tr>
       				<script type="text/javascript">
                        var tabla = document.getElementById("miTabla");
        				get_paciente_node(function(paciente){
        					var tabla = document.getElementById("miTabla");
        					for(i=0; i<(paciente.length); i++){
        						var filas = tabla.rows.length;
        						var fila = tabla.insertRow(filas);
        						fila.insertCell(0).innerHTML = '<button class="btn_borrar" type="button" onClick="borrar_paciente('+paciente[i][0]+',\'' + paciente[i][1] + '\')"></button>';
        						fila.insertCell(0).innerHTML = '<button class="btn" type="button" onClick="datos('+paciente[i][0]+',\'' + paciente[i][1] + '\',\'' + paciente[i][2] + '\',\'' + paciente[i][3] + '\')"></button>';
        						fila.insertCell(0).innerHTML = paciente[i][2];
        						fila.insertCell(0).innerHTML = paciente[i][1];
        					}
                            console.log("Lista de pacientes disponible en el navegador");
        				});
    				</script>
  				</tr>
  			</table><br>
  			<p>Para añadir a un paciente rellene el formulario y haga click en 'Añadir':</p><br>
			<p1>Nombre: </p1>
    		<input type="text" id="nombre" placeholder="Nombre del Paciente"><br>
    		<p1>Apellido: </p1>
    		<input type="text" id="apellido" placeholder="Apellidos del Paciente"><br>
    		<p1>Sexo:&nbsp;&nbsp;&nbsp;&nbsp; </p1>
    		<input type="radio" name="sexo" value="h" id="sexo1"> Hombre
  			<input type="radio" name="sexo" value="m" id="sexo2"> Mujer<br>
    		<script type="text/javascript">
    			function Validar(){
    				if(document.getElementById("sexo1").checked){
    					var sexo = document.getElementById("sexo1").value;
    				}
    				else if(document.getElementById("sexo2").checked){
    					var sexo = document.getElementById("sexo2").value;
    				}
    				else{
    					alert("Añada un sexo");
    					return;
    				}
    				if(document.getElementById("nombre").value == "" || document.getElementById("apellido").value == ""){
    					alert("Rellene nombre y apellidos");
    					return;
    				}
    			save_paciente(document.getElementById("nombre").value, document.getElementById("apellido").value,sexo);
    			}
    		</script>
    		<input type="button" onclick="Validar()" value="Añadir"><br><br>
			<footer>Derechos reservados</footer>
		</section>
	</body>
</head>
</html>